## Application of A-mode (non-image-based) ultrasound in musculoskeletal system
Ultrasonic waves have been recognised as valuable tools in non-destructive testing of materials. However, while the B-mode ultrasound system is widely used in medicine (for viewing of soft tissues), the A-mode ultrasound system is not extensively applied clinically. Here, we present the application of A-mode ultrasound in prosthetics and preliminary testing of its application in detecting knee meniscus extrusion. 


| script                 | description                                  |
|------------------------|----------------------------------------------|
| us_signal              | Processing ultrasound signal   |
| us_transform           | Transforming ultrasound signal using fft/wavelet transform |


## 1. Prosthetics ([abstract](https://github.com/doscsy12/US_knee/blob/main/US_abstract.pdf))
A satisfactorily fitted socket interacts dynamically with the stump in order to support body weight, transmit load effectively, enhance dynamic stability, and enable the control and stabilization of the residual limb. The internal dynamics occurring within a socket is important in determining optimal fit. Many measurement and imaging techniques, such as X-rays, have been utilized to investigate the movement of the residual femur within the stump during gait. However, due to associated health risks and costs, none of the current techniques have been extended to clinical prosthetics. The use of B-mode ultrasound has been suggested as a safe and cheap alternative, and has been utilized in previous studies to monitor the motion of the femur. However, the need to create a duplicate socket and time-consuming analysis of the images were obstacles to the system being applied clinically. This study aims to gauge the effectiveness of a non-image based ultrasound system. Here, we determined errors expected from the measurements. Accuracy errors of 2.9 mm to 8.4 mm and reproducibility measurements within a standard deviation of 3.9 mm are reported. We also estimated errors up to 14.4 mm in in-vivo measurements. We think there is potential in developing this technique, and we hope to reduce some technical difficulties such that it can, one day, be easily incorporated into prosthetic fitting.

## 2. Analysis of ultrasonic waves
Currently, ultrasonic pulse echo technique is being utilized to detect bone position within an amputee stump ([Chong and Roehrle, 2016](https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0164583)). As the ultrasonic wave propagates though various biological media, part of its energy is being reflected if the wave encounters an interface or a boundary between media with different acoustical properties (such as skin/fat interface or fat/muscle interface, etc).  The problem is that biological media has a wide range of compressibility and density, and this results in various (unknown) energy loss through absorption and redirection. In addition, scattering predominates by the time the ultrasonic wave reaches bone, a medium with porous-like structure (which also just happens to be a medium of interest). 

One approach would be utilizing Fourier transform, which is probably the simplest (and the go-to) method for analysing experimental biosignals in the frequency domain. Time-frequency analysis is useful for analysing nonstationary (transient) signals, and it can provide information on the frequency and phase content of specific windows of a signal as it changes over time. A spectrogram, calculated as the squared magnitude of a short-time Fourier Transform (STFT) with a Hamming function as the windowing function, is used to analyse the A-mode signals ([Figure 1](https://github.com/doscsy12/US_knee/blob/main/ultrasound_spectogram.jpg)). However, the Short-time Fourier transform can only be performed when the time-frequency window is fixed, and so, it is not suitable for very high or very low frequency signals. 
<img src="https://github.com/doscsy12/US_knee/blob/main/ultrasound_spectogram.jpg" width="400">

Another alternative would be using the Wavelet transform, as the time-frequency window can be changed with frequency. Previously, wavelet transform (such as the Gabor wavelet) has been a useful tool for the enhancement of ultrasonic data to identify flaws during non-destructive testing of materials. Two basic functions, namely Haar and symlet ([Figure 2](https://github.com/doscsy12/US_knee/blob/main/ultrasound_symlet.jpg)) were explored. Perhaps with Wavelet transform, one can better distinguish the boundaries at which different acoustical properties occur in biological media, and may provide better (or more accurate) information as to when the muscle/bone interface occurs within a stump. 
<img src="https://github.com/doscsy12/US_knee/blob/main/ultrasound_symlet.jpg" width="400">